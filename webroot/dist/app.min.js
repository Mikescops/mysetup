class siiimpleToast{constructor(e){if(e||(e={vertical:"bottom",horizontal:"right"}),!e.vertical)throw new Error('Please set parameter "vertical" ex) bottom, top ');if(!e.horizontal)throw new Error('Please set parameter "horizontal" ex) left, center, right ');this._settings=e,this.defaultClass="siiimpleToast",this.defaultStyle={position:"fixed",padding:"1rem 1.2rem",minWidth:"17rem",maxWidth:"100%",marginLeft:"1rem",zIndex:"9999",borderRadius:"2px",color:"white",fontWeight:300,pointerEvents:"none",opacity:0,boxShadow:"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)",transform:"scale(0.5)",transition:"all 0.4s ease-out"},this.verticalStyle=this.setVerticalStyle()[this._settings.vertical],this.horizontalStyle=this.setHorizontalStyle()[this._settings.horizontal]}setVerticalStyle(){return{top:{top:"-100px"},bottom:{bottom:"-100px"}}}setHorizontalStyle(){return{left:{left:"1rem"},center:{left:"50%",transform:"translateX(-50%) scale(0.5)"},right:{right:"1rem"}}}setMessageStyle(){return{default:"#323232",success:"#005f84",alert:"#db2828"}}init(e,t){const i=document.querySelector("body"),s=document.createElement("div");s.className=this.defaultClass,s.innerHTML=t,Object.assign(s.style,this.defaultStyle,this.verticalStyle,this.horizontalStyle),s.style.backgroundColor=this.setMessageStyle()[e],i.insertBefore(s,i.firstChild);let a=0;setTimeout(()=>{this.addAction(s)},a+=100),setTimeout(()=>{this.removeAction(s)},a+=5e3),setTimeout(()=>{this.removeDOM(s)},a+=500)}addAction(e){const t=document.getElementsByClassName(this.defaultClass);let i=15;"center"==this._settings.horizontal?e.style.transform="translateX(-50%) scale(1)":e.style.transform="scale(1)",e.style.opacity=1;for(let e=0;e<t.length;e+=1){const s=t[e].offsetHeight,a=15;"bottom"==this._settings.vertical?t[e].style.bottom=`${i}px`:t[e].style.top=`${i}px`,i+=s+a}}removeAction(e){const t=e.offsetWidth,i=e.getBoundingClientRect();"right"==this._settings.horizontal?e.style.right=`-${t}px`:e.style.left=`${i.left+t}px`,e.style.opacity=0}removeDOM(e){e.parentNode.removeChild(e)}message(e){this.init("default",e)}success(e){this.init("success",e)}alert(e){this.init("alert",e)}}window.addEventListener("load",()=>{window.cookieconsent.initialise({palette:{popup:{background:"#000"},button:{background:"#328fea"}},theme:"classic",position:"bottom-left",content:{href:webRootJs+"pages/legals"}})}),$(window).scroll(()=>{$(window).scrollTop()<50?$(".heavy-nav").stop().removeClass("nav-color").addClass("nav-transparent"):$(".heavy-nav").stop().removeClass("nav-transparent").addClass("nav-color")});let scrollTop=$(window).scrollTop();scrollTop<50?$(".heavy-nav").addClass("nav-transparent"):$(".heavy-nav").addClass("nav-color");const revealElement=e=>{e.addClass("reveal")},unRevealElement=e=>{e.removeClass("reveal")},inIframe=()=>{try{return window.self!==window.top}catch(e){return!0}};function featuredPreviewChange(){$(".gallery-holder.homide").removeClass("homide")}var timer;$(".post_slider").slick({centerMode:!1,autoplay:!1,adaptiveHeight:!0,lazyLoad:"progressive",arrows:!0,infinite:!1,slidesToShow:1,responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,slidesToShow:1}}]}),$(function(){$(".tabs").on("click","li a",function(e){e.preventDefault();var t=$(this),i=t.attr("href");$(".active").removeClass("active"),t.addClass("active"),$(".show").removeClass("show").addClass("hide").hide(),$(i).removeClass("hide").addClass("show").hide().fadeIn(550)}),$(".form-action").on("click",".next",function(e){e.preventDefault();var t=$(this).attr("href"),i=$(t+"-tab");$(".active").removeClass("active"),i.addClass("active"),$(".show").removeClass("show").addClass("hide").hide(),$(t).removeClass("hide").addClass("show").hide().fadeIn(550)})}),$(".video-url-input").on("input",function(){const e=$(this);"www."==e.val().substring(0,4)&&e.val("http://www."+e.val().substring(4));/(http|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/.test(e.val())?e.removeClass("invalid").addClass("valid"):e.removeClass("valid").addClass("invalid")}),$(()=>{$(".tabs-edit").on("click","li a",function(e){e.preventDefault();const t=$(this),i=t.attr("href");$(".active-edit").removeClass("active-edit"),t.addClass("active-edit"),$(".show-edit").removeClass("show-edit").addClass("hide-edit").hide(),$(i).removeClass("hide-edit").addClass("show-edit").hide().fadeIn(550)}),$(".form-action-edit").on("click",".next",function(e){e.preventDefault();const t=$(this).attr("href"),i=$(t+"-tab");$(".active-edit").removeClass("active-edit"),i.addClass("active-edit"),$(".show-edit").removeClass("show-edit").addClass("hide-edit").hide(),$(t).removeClass("hide-edit").addClass("show-edit").hide().fadeIn(550)})});const searchItem=(e,t)=>{clearTimeout(timer),timer=setTimeout(()=>{e.length<2||$.ajax({url:webRootJs+"thirdParties/searchProducts",type:"get",data:{q:e},success:e=>{$(".search_results."+t).html("");const i=e.products;null==i[0]&&$(".search_results."+t).append("No products found..."),$.each(i,function(e,i){let s=$('<li class="text-card"></li>'),a=i.src,o=encodeURIComponent(a),n=i.title,r=decodeURIComponent(n),l=i.href,c=encodeURIComponent(l);s.html(`<div class="wrapper"> <div class="card-container"> <div class="top" style="background: url(${a}) no-repeat center center; background-size: contain"></div> <a onclick="addToBasket(\`${n}\`, '${c}', '${o}', '${t}')" class="bottom"><i class="fas fa-plus"></i></a> </div> <div class="inside"> <div class="icon"><i class="fas fa-info-circle"></i></div> <div class="contents"> ${r} </div> </div> </div>`),$(".search_results."+t).append(s)})},error:()=>{$(".search_results."+t).html("No products found...")}})},400)},addToBasket=(e,t,i,s)=>{$(".hiddenInput."+s).val($(".hiddenInput."+s).val()+e+";"+t+";"+i+","),decodedTitle=decodeURIComponent(e),decodedSrc=decodeURIComponent(i);let a=$('<li class="text-card"></li>');a.html(`<div class="wrapper"> <div class="card-container"> <div class="top" style="background: url(${decodedSrc}) no-repeat center center; background-size: contain"></div> <a onclick="deleteFromBasket(\`${e}\`,this,'${s}')" class="bottom"><i class="far fa-trash-alt"></i></a> </div> <div class="inside"> <div class="icon"><i class="fas fa-info-circle"></i></div> <div class="contents"> ${decodedTitle} </div> </div> </div>`),$(".basket_items."+s).append(a)},deleteFromBasket=(e,t,i)=>{const s=$(".hiddenInput."+i).val().split(",");new_arr=$.grep(s,t=>t.split(";")[0]!=e),$(".hiddenInput."+i).val(new_arr),t.closest("li").remove()},likeSetup=e=>{const t=()=>{$(".like_button").addClass("active"),printLikes(e)},i=()=>{$(".like_button").removeClass("active"),printLikes(e)},s=e=>{};$(".like_button").hasClass("active")?$.ajax({url:webRootJs+"likes/dislike",type:"get",data:{setup_id:e},success:i,error:s}):$.ajax({url:webRootJs+"likes/like",type:"get",data:{setup_id:e},success:t,error:s})},printLikes=e=>{$.ajax({url:webRootJs+"likes/getlikes",data:{setup_id:e},dataType:"html",type:"get",success:e=>{$(".pointing_label").html(e)},error:(e,t,i)=>{}})},doesLike=e=>{$.ajax({url:webRootJs+"likes/doesLike",data:{setup_id:e},dataType:"html",type:"get",success:e=>{"true"==e&&$(".like_button").addClass("active")}})},infiniteScroll=e=>{let t=e;$(window).data("ajaxready",!0),$(window).scroll(()=>{0!=$(window).data("ajaxready")&&$(window).scrollTop()+$(window).height()+500>$(document).height()&&($(window).data("ajaxready",!1),$.ajax({url:webRootJs+"api/getSetups",data:{p:t,n:e,o:"DESC"},dataType:"json",type:"get",success:e=>{if(e[0]){const t=document.getElementById("template-list-item").innerHTML;let i="";const s=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,e=>t[e])};$.each(e,(e,a)=>{let o=s(a.title),n=webRootJs+`setups/${a.id}-${convertToSlug(s(a.title))}`,r=webRootJs;a.resources[0]?r+=a.resources[0].src:r+="img/not_found.jpg";let l=a.like_count,c=s(a.user.name),d=webRootJs+`uploads/files/pics/profile_picture_${a.user_id}.png?`+("0"+new Date(a.user.modificationDate).getMinutes()).slice(-2)+("0"+new Date(a.user.modificationDate).getSeconds()).slice(-2),h=webRootJs+"users/"+a.user_id,p=[0,0,0];a.main_colors&&(p=$.parseJSON(a.main_colors)[0]);let f=p[0],u=p[1],m=p[2];i+=t.replace(/{{ title }}/g,o).replace(/{{ url }}/g,n).replace(/{{ img_src }}/g,r).replace(/{{ likes }}/g,l).replace(/{{ user_name }}/g,c).replace(/{{ user_src }}/g,d).replace(/{{ user_url }}/g,h).replace(/{{ rgb_1 }}/g,f).replace(/{{ rgb_2 }}/g,u).replace(/{{ rgb_3 }}/g,m)}),$(".fullitem_holder").append(i),$(window).data("ajaxready",!0)}else $(".no_more_setups").html("No more setups to display...")}}),t+=e)})},replaceValidationUI=e=>{e.addEventListener("invalid",e=>{e.preventDefault()},!0),e.addEventListener("submit",e=>{if(!this.checkValidity())return e.preventDefault();$("#publish-add").replaceWith("<span class='float-right button'><i class='fa fa-circle-o-notch fa-spin fa-fw'></i></span>")}),e.querySelector("input[type=submit]").addEventListener("click",()=>{const t=e.querySelectorAll(":invalid");let i,s="";for(let a=0;a<t.length;a++)s+=`<div>${(i=e.querySelector(`label[for=${t[a].id}]`)).innerHTML} | ${t[a].validationMessage}</div>`;t.length>0&&(toast.alert(s),t[1].focus())})},forms=document.querySelectorAll(".form_add_setup");for(let e=0;e<forms.length;e++)replaceValidationUI(forms[e]);const saveasdraftadd=()=>{$("#status-add").val("DRAFT"),$("#publish-add").click()},saveasdraftedit=()=>{$("#status-edit").val("DRAFT"),$("#publish-edit").click()},fasterPreview=e=>{e.files&&e.files[0]&&$("#profileImage").attr("src",window.URL.createObjectURL(e.files[0]))},logTwitch=e=>{const t=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2);window.location=`https://api.twitch.tv/kraken/oauth2/authorize?client_id=${twitchClientId}&redirect_uri=${webRootJs}twitch/&response_type=code&scope=user_read&state=${e}${t}`},convertToSlug=e=>{var t=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];let i=$.trim(e);for(let e=0,s=t.length;e<s;e++)i=i.replace(t[e].re,t[e].ch);return i.replace(/[^a-z0-9-]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")},checknotification=()=>{0==inIframe()&&($.ajax({url:webRootJs+"notifications/getNotifications",data:{n:"8"},dataType:"html",type:"get",success:e=>{notifs=$.parseJSON(e),$("#notif-container").html(""),notifs.notifications.length?($.each(notifs.notifications,(e,t)=>{$("#notif-container").append(`<div onclick="markNotificationAsRead(${t.id})" id="notifnb-${t.id}" class="notif notifnb-${t.id}">\n\t\t\t\t\t\t\t${t.content}\n\t\t\t\t\t\t\t<div class="notif-close">\n\t\t\t\t\t\t\t\t<span onclick="markNotificationAsRead(${t.id})"><i class="fa fa-eye-slash"></i></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`)}),$("#notifications-trigger").addClass("notif-trigger"),$("#no-notif").hide(),notificationInstance.update(notificationcenter)):($("#notifications-trigger").removeClass("notif-trigger"),$("#no-notif").show(),notificationInstance.update(notificationcenter))}}),setTimeout(()=>{checknotification()},3e4))},markNotificationAsRead=e=>{$.ajax({url:webRootJs+"notifications/markAsRead",type:"get",data:{id:e},success:t=>{"MARKED"==t&&($("#notifnb-"+e).remove(),$(`.notifnb-${e}`).removeClass("unread"),$(`.notifnb-${e} .notif-close .notif-read`).html(`<span onclick="markNotificationAsUnread(${e})"><i class="fa fa-eye"></i></span>`),$.trim($("#notif-container").html()).length||($("#notifications-trigger").removeClass("notif-trigger"),$("#no-notif").show(),notificationInstance.update(notificationcenter)))}})},markNotificationAsUnread=e=>{$.ajax({url:webRootJs+"notifications/markAsUnread",type:"get",data:{id:e},success:t=>{"MARKED"==t&&($(`.notifnb-${e}`).addClass("unread"),$(`.notifnb-${e} .notif-close .notif-read`).html(`<span onclick="markNotificationAsRead(${e})"><i class="fa fa-eye-slash"></i></span>`))}})},deleteNotification=e=>{$.ajax({url:webRootJs+"notifications/delete",type:"get",data:{id:e},success:t=>{"DELETED"==t&&($(`.notifnb-${e}`).remove(),$.trim($("#notif-container").html()).length||($("#notifications-trigger").removeClass("notif-trigger"),$("#no-notif").show(),notificationInstance.update(notificationcenter)))}})},commentModal=e=>{lity(document.getElementById(e+"-comment-script").innerHTML),$("#"+e+"-comment-field").emojioneArea({pickerPosition:"top"})};$(()=>{$(".reset_pwd").click(()=>($(this).hide(),$(".pwd_field").show("fast"),!1)),$("#social-networks").jsSocials({shareIn:"popup",showCount:!1,showLabel:!1,shares:["twitter","facebook","googleplus","pinterest","whatsapp"]}),$("#profileImage").click(()=>{$("#profileUpload").click()}),$("#profileUpload").change(()=>{fasterPreview(this)}),$(".edit-comment").click(()=>{const e=$(this).attr("source"),t=$("#"+e+"> p").attr("content"),i=e.replace(/[^0-9]/g,"");$(".textarea-edit-comment > .emojionearea-editor").text(t),$("#edit-comment-hidden > form").attr("action",$("#edit-comment-hidden > form").attr("action")+"/"+i)})});