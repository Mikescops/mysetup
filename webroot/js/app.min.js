$(window).scroll(function(){var scrollTop=$(window).scrollTop();if(scrollTop<50){$('.heavy-nav').stop().removeClass('nav-color').addClass('nav-transparent')}else{$('.heavy-nav').stop().removeClass('nav-transparent').addClass('nav-color')}})
$(function(){var scrollTop=$(window).scrollTop();if(scrollTop<50){$('.heavy-nav').addClass('nav-transparent')}else{$('.heavy-nav').addClass('nav-color')}})
$('.home_slider').slick({centerMode:!0,infinite:!0,arrows:!1,lazyLoad:'progressive',autoplay:!0,autoplaySpeed:4000,centerPadding:'200px',slidesToShow:1,responsive:[{breakpoint:900,settings:{arrows:!1,centerMode:!0,centerPadding:'50px',slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:'20px',slidesToShow:1}}]});$('.post_slider').slick({centerMode:!1,autoplay:!1,adaptiveHeight:!0,lazyLoad:'progressive',arrows:!0,infinite:!1,slidesToShow:1,responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1,}},{breakpoint:480,settings:{arrows:!1,slidesToShow:1,}}]});$(function(){var SHOW_CLASS='show',HIDE_CLASS='hide',ACTIVE_CLASS='active';$('.tabs').on('click','li a',function(e){e.preventDefault();var $tab=$(this),href=$tab.attr('href');$('.active').removeClass(ACTIVE_CLASS);$tab.addClass(ACTIVE_CLASS);$('.show').removeClass(SHOW_CLASS).addClass(HIDE_CLASS).hide();$(href).removeClass(HIDE_CLASS).addClass(SHOW_CLASS).hide().fadeIn(550)});$('.form-action').on('click','.next',function(e){e.preventDefault();var $next=$(this),href=$next.attr('href'),$tab=$(href+'-tab');$('.active').removeClass(ACTIVE_CLASS);$tab.addClass(ACTIVE_CLASS);$('.show').removeClass(SHOW_CLASS).addClass(HIDE_CLASS).hide();$(href).removeClass(HIDE_CLASS).addClass(SHOW_CLASS).hide().fadeIn(550)})});$(function(){var SHOW_CLASS='show-edit',HIDE_CLASS='hide-edit',ACTIVE_CLASS='active-edit';$('.tabs-edit').on('click','li a',function(e){e.preventDefault();var $tab=$(this),href=$tab.attr('href');$('.active-edit').removeClass(ACTIVE_CLASS);$tab.addClass(ACTIVE_CLASS);$('.show-edit').removeClass(SHOW_CLASS).addClass(HIDE_CLASS).hide();$(href).removeClass(HIDE_CLASS).addClass(SHOW_CLASS).hide().fadeIn(550)});$('.form-action-edit').on('click','.next',function(e){e.preventDefault();var $next=$(this),href=$next.attr('href'),$tab=$(href+'-tab');$('.active-edit').removeClass(ACTIVE_CLASS);$tab.addClass(ACTIVE_CLASS);$('.show-edit').removeClass(SHOW_CLASS).addClass(HIDE_CLASS).hide();$(href).removeClass(HIDE_CLASS).addClass(SHOW_CLASS).hide().fadeIn(550)})});$(function(){$('.is_author').click(function(){$(this).hide();$('.setup_author').show('fast');return!1});$('.reset_pwd').click(function(){$(this).hide();$('.pwd_field').show('fast');return!1});$("#social-networks").jsSocials({shareIn:"popup",showCount:!1,showLabel:!1,shares:["twitter","facebook","googleplus","pinterest","whatsapp"]});$("#profileImage").click(function(e){$("#profileUpload").click()});$("#profileUpload").change(function(){fasterPreview(this)});$("#featuredimage").change(function(){featuredPreview(this)});$("#featuredImage_edit").change(function(){featuredPreview_edit(this)});$("#featuredimage_preview").click(function(e){$(".label_fimage").click()});$("#gallery0image_preview_edit").click(function(e){$("#gallery0").click()});$("#gallery1image_preview_edit").click(function(e){$("#gallery1").click()});$("#gallery2image_preview_edit").click(function(e){$("#gallery2").click()});$("#gallery3image_preview_edit").click(function(e){$("#gallery3").click()});$("#gallery4image_preview_edit").click(function(e){$("#gallery4").click()});$("#gallery0").change(function(){galleryPreview_edit(this,0)});$("#gallery1").change(function(){galleryPreview_edit(this,1)});$("#gallery2").change(function(){galleryPreview_edit(this,2)});$("#gallery3").change(function(){galleryPreview_edit(this,3)});$("#gallery4").change(function(){galleryPreview_edit(this,4)});$("#gallery0image_preview_add").click(function(e){$("#gallery0add").click()});$("#gallery1image_preview_add").click(function(e){$("#gallery1add").click()});$("#gallery2image_preview_add").click(function(e){$("#gallery2add").click()});$("#gallery3image_preview_add").click(function(e){$("#gallery3add").click()});$("#gallery4image_preview_add").click(function(e){$("#gallery4add").click()});$("#gallery0add").change(function(){galleryPreview_add(this,0)});$("#gallery1add").change(function(){galleryPreview_add(this,1)});$("#gallery2add").change(function(){galleryPreview_add(this,2)});$("#gallery3add").change(function(){galleryPreview_add(this,3)});$("#gallery4add").change(function(){galleryPreview_add(this,4)});$(".edit-comment").click(function(e){var $comment=$(this),$place=$comment.attr('source');var $oldvalue=$('#'+$place+'> p').attr('content'),$id=$place.replace(/[^0-9]/g,'');$('.textarea-edit-comment > .emojionearea-editor').html(emojione.toImage($oldvalue));$('#edit-comment-hidden > form').attr('action',$('#edit-comment-hidden > form').attr('action')+'/'+$id)})});function fasterPreview(uploader){if(uploader.files&&uploader.files[0]){$('#profileImage').attr('src',window.URL.createObjectURL(uploader.files[0]))}}
function featuredPreview(uploader){if(uploader.files&&uploader.files[0]){$('#featuredimage_preview').attr('src',window.URL.createObjectURL(uploader.files[0]))}
$(".label_fimage_add").hide();$(".gallery-holder.homide").show()}
function featuredPreview_edit(uploader){if(uploader.files&&uploader.files[0]){$('#featuredimage_preview_edit').attr('src',window.URL.createObjectURL(uploader.files[0]))}}
function galleryPreview_edit(uploader,number){if(uploader.files&&uploader.files[0]){$('#gallery'+number+'image_preview_edit').attr('src',window.URL.createObjectURL(uploader.files[0]))}}
function galleryPreview_add(uploader,number){if(uploader.files&&uploader.files[0]){$('#gallery'+number+'image_preview_add').attr('src',window.URL.createObjectURL(uploader.files[0]))}}
var timer;function searchItem(query,region,action){clearTimeout(timer);timer=setTimeout(function validate(){$.ajax({url:webRootJs+'amazon/index.php',type:'get',data:{"q":query,"lang":region},success:function(response){$(".search_results."+action).html("");var el=$('<div></div>');el.html(response);var items=$('item',el);if(items[0]==null){$(".search_results."+action).append("No items found...")}
$.each(items,function(key,value){var list=$('<li></li>');var mediumimage=$('mediumimage',value);var attributes=$('itemattributes',value);var img=$('<img>');var src=$('url',mediumimage).html();img.attr('src',src);var title=$('title',attributes).html();img.attr('title',title);if(title.length>48){var shorttitle=title.substring(0,48)+'..'}
var url=$('detailpageurl',value).html();var encodedUrl=encodeURIComponent(url);var encodedTitle=encodeURIComponent(title);var encodedSrc=encodeURIComponent(src);list.html('<a onclick="addToBasket(\`'+encodedTitle+'\`, \''+encodedUrl+'\', \''+encodedSrc+'\', \''+action+'\')"><p>'+title+'</p><i class="fa fa-square-o" aria-hidden="true"></i></a>');list.find('a').prepend(img);$(".search_results."+action).append(list)});var image=$('mediumimage')}})},500)};function addToBasket(title,url,src,action){$('.hiddenInput.'+action).val($('.hiddenInput.'+action).val()+title+';'+url+';'+src+',');$(".search_results."+action).html("");$(".liveInput."+action).val("");decodedTitle=decodeURIComponent(title);decodedSrc=decodeURIComponent(src);var list=$('<li></li>');var img=$('<img>');img.attr('src',decodedSrc);list.html('<a onclick="deleteFromBasket(\`'+title+'\`,this,\''+action+'\')"><p>'+decodedTitle+'</p><i class="fa fa-check-square-o" aria-hidden="true"></i></a>');list.find('a').prepend(img);$(".basket_items."+action).append(list)}
function deleteFromBasket(title,parent,action){var ResearchArea=$('.hiddenInput.'+action).val();var splitTextInput=ResearchArea.split(",");new_arr=$.grep(splitTextInput,function(n,i){return n.split(";")[0]!=title});$('.hiddenInput.'+action).val(new_arr);parent.closest('li').remove()}
function likeSetup(id){if($(".red_button").hasClass("active")){$.ajax({url:webRootJs+'likes/dislike',type:'get',data:{"setup_id":id},success:answer_dislike,error:answer_error})}
else{$.ajax({url:webRootJs+'likes/like',type:'get',data:{"setup_id":id},success:answer_like,error:answer_error})}
function answer_like(response){$(".red_button").addClass("active");printLikes(id)}
function answer_dislike(response){$(".red_button").removeClass("active");printLikes(id)}
function answer_error(response){console.log(response)}}
function printLikes(id){$.ajax({url:webRootJs+"likes/getlikes",data:{setup_id:id},dataType:'html',type:'get',success:function(json){$(".pointing_label").html(json)}})}
function doesLike(setup){$.ajax({url:webRootJs+"likes/doesLike",data:{setup_id:setup},dataType:'html',type:'get',success:function(json){if(json=='true')
$(".red_button").addClass("active")}})}
class siiimpleToast{constructor(settings){if(!settings){settings={vertical:'bottom',horizontal:'right'}}
if(!settings.vertical)throw new Error('Please set parameter "vertical" ex) bottom, top ');if(!settings.horizontal)throw new Error('Please set parameter "horizontal" ex) left, center, right ');this._settings=settings;this.defaultClass='siiimpleToast';this.defaultStyle={position:'fixed',padding:'1rem 1.2rem',minWidth:'17rem',maxWidth:'100%',marginLeft:'1rem',zIndex:'30',borderRadius:'2px',color:'white',fontWeight:300,pointerEvents:'none',opacity:0,boxShadow:'0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)',transform:'scale(0.5)',transition:'all 0.4s ease-out'}
this.verticalStyle=this.setVerticalStyle()[this._settings.vertical];this.horizontalStyle=this.setHorizontalStyle()[this._settings.horizontal]}
setVerticalStyle(){return{top:{top:'-100px'},bottom:{bottom:'-100px'}}}
setHorizontalStyle(){return{left:{left:'1rem'},center:{left:'50%',transform:'translateX(-50%) scale(0.5)'},right:{right:'1rem'}}}
setMessageStyle(){return{default:'#323232',success:'#005f84',alert:'#db2828',}}
init(state,message){const root=document.querySelector('body');const newToast=document.createElement('div');newToast.className=this.defaultClass;newToast.innerHTML=message;Object.assign(newToast.style,this.defaultStyle,this.verticalStyle,this.horizontalStyle);newToast.style.backgroundColor=this.setMessageStyle()[state];root.insertBefore(newToast,root.firstChild);let time=0;setTimeout(()=>{this.addAction(newToast)},time+=100);setTimeout(()=>{this.removeAction(newToast)},time+=5000);setTimeout(()=>{this.removeDOM(newToast)},time+=500)}
addAction(obj){const toast=document.getElementsByClassName(this.defaultClass);let pushStack=15;if(this._settings.horizontal=='center'){obj.style.transform='translateX(-50%) scale(1)'}else{obj.style.transform='scale(1)'}
obj.style.opacity=1;for(let i=0;i<toast.length;i+=1){const height=toast[i].offsetHeight;const objMargin=15;if(this._settings.vertical=='bottom'){toast[i].style.bottom=`${pushStack}px`}else{toast[i].style.top=`${pushStack}px`}
pushStack+=height+objMargin}}
removeAction(obj){const width=obj.offsetWidth;const objCoordinate=obj.getBoundingClientRect();if(this._settings.horizontal=='right'){obj.style.right=`-${width}px`}else{obj.style.left=`${objCoordinate.left + width}px`}
obj.style.opacity=0}
removeDOM(obj){const parent=obj.parentNode;parent.removeChild(obj)}
message(message){this.init('default',message)}
success(message){this.init('success',message)}
alert(message){this.init('alert',message)}}
function convertToSlug(str)
{var rExps=[{re:/[\xC0-\xC6]/g,ch:'A'},{re:/[\xE0-\xE6]/g,ch:'a'},{re:/[\xC8-\xCB]/g,ch:'E'},{re:/[\xE8-\xEB]/g,ch:'e'},{re:/[\xCC-\xCF]/g,ch:'I'},{re:/[\xEC-\xEF]/g,ch:'i'},{re:/[\xD2-\xD6]/g,ch:'O'},{re:/[\xF2-\xF6]/g,ch:'o'},{re:/[\xD9-\xDC]/g,ch:'U'},{re:/[\xF9-\xFC]/g,ch:'u'},{re:/[\xC7-\xE7]/g,ch:'c'},{re:/[\xD1]/g,ch:'N'},{re:/[\xF1]/g,ch:'n'}];var $slug='';var trimmed=$.trim(str);for(var i=0,len=rExps.length;i<len;i++)
trimmed=trimmed.replace(rExps[i].re,rExps[i].ch);$slug=trimmed.replace(/[^a-z0-9-]/gi,'-').replace(/-+/g,'-').replace(/^-|-$/g,'');return $slug}
function infiniteScroll(nbtodisplay){var offset=nbtodisplay;$(window).data('ajaxready',!0);$(window).scroll(function(){if($(window).data('ajaxready')==!1)return;if(($(window).scrollTop()+$(window).height())+250>$(document).height()){$(window).data('ajaxready',!1);$.ajax({url:webRootJs+"setups/getSetups",data:{p:offset,n:nbtodisplay,o:'DESC'},dataType:'html',type:'get',success:function(json){setups=$.parseJSON(json);if(setups[0]){$.each(setups,function(key,value){var nblikes;if(value.likes[0]){nblikes=value.likes[0].total}
else{nblikes=0}
$('.fullitem_holder').append('<div class="fullitem"><a href="'+webRootJs+'setups/'+value.id+'-'+convertToSlug(value.title)+'"><img src="'+webRootJs+value.resources[0].src+'"><\/a><div class="red_like"><i class="fa fa-heart"><\/i> '+nblikes+'<\/div><div class="fullitem-inner"><div class="row"><div class="column column-75"><a class="featured-user" href="'+webRootJs+'users/'+value.user_id+'"><img src="'+webRootJs+'uploads/files/pics/profile_picture_'+value.user_id+'.png?'+("0"+(new Date(value.user.modificationDate)).getMinutes()).slice(-2)+("0"+(new Date(value.user.modificationDate)).getSeconds()).slice(-2)+'"><\/a><a href="'+webRootJs+'setups/'+value.id+'-'+convertToSlug(value.title)+'"><h3>'+value.title+'<\/h3><\/a><\/div><\/div><\/div><\/div>')});$(window).data('ajaxready',!0)}
else{$('.no_more_setups').html("No more setups to display...")}}});offset+=nbtodisplay}})}
function logTwitch(lang){var rand_state=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2);window.location='https://api.twitch.tv/kraken/oauth2/authorize?client_id=zym0nr99v74zljmo6z96st25rj6rzz&redirect_uri=https://mysetup.co/twitch/&response_type=code&scope=user_read&state='+lang+rand_state}
function checknotification(){$.ajax({url:webRootJs+"notifications/getNotifications",data:{n:'8'},dataType:'html',type:'get',success:function(json){notifs=$.parseJSON(json);$('#notif-container').html('');if(notifs[0]){$.each(notifs,function(key,value){$('#notif-container').append('<div onclick="markasread('+value.id+')" class="notif notifnb-'+value.id+'">'+value.content+'<div class="notif-close"><span onclick="markasread('+value.id+')">×</span></div></div>')});$('#notifications-trigger').addClass('notif-trigger');$('#no-notif').hide();instance.update(popper)}
else{$('#notifications-trigger').removeClass('notif-trigger');$('#no-notif').show();instance.update(popper)}}});setTimeout(function(){checknotification()},20000)}
function markasread(id){$.ajax({url:webRootJs+'notifications/markAsRead',type:'get',data:{"notification_id":id},});$('.notifnb-'+id).remove();if(!$.trim($('#notif-container').html()).length){$('#notifications-trigger').removeClass('notif-trigger');$('#no-notif').show();instance.update(popper)}}
function saveasdraftadd(){$("#status-add").val('DRAFT');$('#publish-add').click()}
function saveasdraftedit(){$("#status-edit").val('DRAFT');$('#publish-edit').click()}